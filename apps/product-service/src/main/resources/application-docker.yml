# Docker profile - only overrides from base application.yml

# Redis and OAuth in Docker network
spring:
  data:
    redis:
      host: redis
      port: 6379
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: http://wiremock:8080/oauth
          jwk-set-uri: http://wiremock:8080/oauth/.well-known/jwks.json
      client:
        registration:
          downstream-services:
            provider: downstream-auth
            client-id: product-service
            client-secret: product-secret
            authorization-grant-type: client_credentials
            scope: read,write
        provider:
          downstream-auth:
            token-uri: http://wiremock:8080/downstream-oauth/token

# Docker OAuth configuration
app:
  security:
    allowed-issuers:
      - http://wiremock:8080/oauth

# External service URLs (Docker network)
services:
  merchandise:
    base-url: http://merchandise-service:8091
  price:
    base-url: http://price-service:8092
  inventory:
    base-url: http://inventory-service:8093
  catalog:
    base-url: http://wiremock:8080

# Logging path for container
logging:
  file:
    name: /app/logs/application.log

# Additional management settings for Docker
management:
  metrics:
    tags:
      application: ${spring.application.name}
  prometheus:
    metrics:
      export:
        enabled: true
